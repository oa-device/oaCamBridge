# MediaMTX v1.15.0 Production Configuration for oaCamBridge
# Optimized for macOS USB camera streaming with dual outputs

# Logging Configuration
logLevel: info
logDestinations: [file]
logFile: /tmp/mediamtx.log

# API Configuration for Health Monitoring
api: true
apiAddress: 127.0.0.1:9997

# RTSP Server Configuration
rtspAddress: :8554
protocols: [tcp]

# Buffer and Performance Optimization
readBufferCount: 512
writeQueueSize: 1024

# Connection Management
writeTimeout: 10s
readTimeout: 10s

# Disable Unused Protocols for Security and Performance
rtmp: no
hls: no
webrtc: no
srt: no
record: no
playback: no

# Path Configuration with Security
paths:
  # Default path - restricted
  all:

  # oaCamBridge webcam stream - production secured
  webcam:
    source: publisher

    # Security: Only allow localhost publishing (FFmpeg)
    publishIPs: [127.0.0.1, "::1"]